<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
      integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/main.css" />
    <title>View My Work</title>
  </head>

  <body>
    <header>
      <div class="menu-btn">
        <div class="btn-line"></div>
        <div class="btn-line"></div>
        <div class="btn-line"></div>
      </div>
      <nav class="menu">
        <div class="menu-branding"><div class="portrait"></div></div>
        <ul class="menu-nav">
          <li class="nav-item ">
            <a href="index.html" class="nav-link"> Home </a>
          </li>
          <li class="nav-item ">
            <a href="about.html" class="nav-link"> About Me </a>
          </li>
          <li class="nav-item current">
            <a href="work.html" class="nav-link"> My Work </a>
          </li>
          <li class="nav-item">
            <a href="contact.html" class="nav-link"> How to reach me </a>
          </li>
        </ul>
      </nav>
    </header>

    <main id="work">
      <h1 class="lg-heading">Pong <span class="text-secondary">Game</span></h1>
      <h2 class="sm-heading">Lua version of Pong game deployed to web</h2>
      <div class="projects">
        <div class="item">
          <center>
            <canvas
              id="canvas"
              width="1280"
              height="720"
              style="max-width:100%;background:#000;vertical-align:middle"
            ></canvas>
          </center>
        </div>
      </div>
    </main>

    <footer id="main-footer">
      &copy; 2019 Lukasz Cieslak &middot; Made using the
      <a href="https://love2d.org/" target="_blank">LÖVE Framework</a> (<a
        href="https://bitbucket.org/rude/love/raw/default/license.txt"
        target="_blank"
        >License</a
      >) &middot; Packaged using
      <a href="https://schellingb.github.io/LoveWebBuilder/" target="_blank"
        >LÖVE Web Builder</a
      >
    </footer>

    <script src="js/main.js" type="text/javascript">
      (function(){

          var TXT =
          {
              PLAYBTN: 'Click here to launch the game',
              LOAD:    'Downloading Game',
              EXECUTE: 'Starting Game',
              DLERROR: 'Error while downloading game data.\nCheck your internet connection.',
              NOWEBGL: 'Your browser or graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation">WebGL</a>.<br>Find out how to get it <a href="http://get.webgl.org/">here</a>.',
          };
          var canvas = document.getElementById('canvas'), ctx;
          var Msg = function(m)
          {
              ctx.clearRect(0, 0, canvas.width, canvas.height);
              ctx.fillStyle = '#888';
              for (var i = 0, a = m.split('\n'), n = a.length; i != n; i++)
                  ctx.fillText(a[i], canvas.width/2, canvas.height/2-(n-1)*20+10+i*40);
          };
          var Fail = function(m)
          {
              canvas.outerHTML = '<div style="max-width:90%;width:'+canvas.clientWidth+'px;height:'+canvas.clientHeight+'px;background:#000;display:table-cell;vertical-align:middle"><div style="background-color:#FFF;color:#000;padding:1.5em;max-width:640px;width:80%;margin:auto;text-align:center">'+TXT.NOWEBGL+(m?'<br><br>'+m:'')+'</div></div>';
          };
          var DoExecute = function()
          {
              Msg(TXT.EXECUTE);
              Module.canvas = canvas.cloneNode(false);
              Module.canvas.oncontextmenu = function(e) { e.preventDefault() };
              Module.setWindowTitle = function(title) { };
              Module.postRun = function()
              {
                  if (!Module.noExitRuntime) { Fail(); return; }
                  canvas.parentNode.replaceChild(Module.canvas, canvas);
                  Txt = Msg = ctx = canvas = null;
                  Module.canvas.focus();
              };
              setTimeout(function() { Module.run(['/l']); }, 50);
          };
          var DoLoad = function()
          {
              Msg(TXT.LOAD);
              window.onerror = function(e,u,l) { Fail(e+'<br>('+u+':'+l+')'); };
              Module = { TOTAL_MEMORY: 1024*1024*24, TOTAL_STACK: 1024*1024*2, currentScriptUrl: '-', preInit: DoExecute };
              var s = document.createElement('script'), d = document.documentElement;
              s.src = "js/Pong_Game.js";
              s.async = true;
              s.onerror = function(e) { d.removeChild(s); Msg(TXT.DLERROR); canvas.disabled = false; };
              d.appendChild(s);
          };
          var DoSetup = function()
          {
              canvas.onclick = function()
              {
                  if (canvas.disabled) return;
                  canvas.disabled = true;
                  canvas.scrollIntoView();
                  DoLoad();
              };
              ctx.fillStyle = '#888';
              ctx.fillRect(canvas.width/2-254, canvas.height/2-104, 508, 208);
              ctx.fillStyle = '#333';
              ctx.fillRect(canvas.width/2-250, canvas.height/2-100, 500, 200);
              ctx.fillStyle = '#888';
              ctx.fillText(TXT.PLAYBTN, canvas.width/2, canvas.height/2+10);
          };
          canvas.oncontextmenu = function(e) { e.preventDefault() };
          ctx = canvas.getContext('2d');
          ctx.font = '30px sans-serif';
          ctx.textAlign = 'center';
          DoSetup();
          })()
    </script>
  </body>
</html>
